#!/bin/sh

# include files
. common/neko_msg
for file in prepare fetch check extract patch build; do
	. common/steps/neko_do_${file}
done

case "${1}" in
	"em" | "emerge")
		do_prepare "${2}"
		do_fetch "${2}"
		do_check "${2}"
		do_extract "${2}"
		do_patch "${2}"
		do_build "${2}"
		;;
	"clean")
		neko_msg normal "Cleaning master directory..."
		rm -rf master/* &&
			neko_msg success "Successfully cleaned master directory!" ||
			{ neko_msg error "Failed to clean master directory!" && exit 1; }
		;;
	*)
		neko_msg error "Unknown option ${1}" && exit 1
		;;
esac

pkgname="bearssl"
short_desc="Implementation of the SSL/TLS protocol (RFC 5246) written in C"
version="0.6"
revision="1"
distfiles="https://bearssl.org/bearssl-${version}.tar.gz"
build_style="makefile"
license="MIT"
license_file="LICENSE.txt"

do_install()
{
	pkg_install bin build/brssl
	pkg_install lib build/libbearssl.so
	pkg_install lib build/libbearssl.a
}

do_uninstall()
{
	pkg_uninstall bin brssl
	pkg_uninstall lib libbearssl.so
	pkg_uninstall lib libbearssl.a
}

subpkg()
{
	pkgname="bearssl-devel"
	do_install()
	{
		pkg_install inc inc/*
	}
	do_uninstall()
	{
		for file in bearssl.h bearssl_aead.h bearssl_block.h bearssl_ec.h\
			bearssl_hash.h bearssl_hmac.h bearssl_kdf.h bearssl_pem.h bearssl_prf.h\
			bearssl_rand.h bearssl_rsa.h bearssl_ssl.h bearssl_x509.h
		do
			pkg_uninstall inc "${file}"
		done
	}
}
